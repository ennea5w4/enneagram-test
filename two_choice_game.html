<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>2æŠ æ€§æ ¼ã‚²ãƒ¼ãƒ </title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:#111; color:#f7f7f7;
      margin:0; padding:0;
      display:flex; min-height:100vh;
      align-items:center; justify-content:center;
    }
    .card{
      background:#181818;
      padding:24px 20px;
      border-radius:16px;
      box-shadow:0 0 25px rgba(0,0,0,.6);
      max-width:520px; width:100%;
      box-sizing:border-box;
      border:1px solid #444;
      position:relative;
      overflow:hidden;
    }
    /* åœ°ç„/å¤©å›½ã®ãƒ ãƒ¼ãƒ‰åˆ‡æ›¿ï¼ˆæ¼”å‡ºã®åœŸå°ï¼‰ */
    .hell{ border-color: rgba(229,9,20,.65); box-shadow: 0 0 28px rgba(229,9,20,.15); }
    .heaven{ border-color: rgba(245,182,66,.75); box-shadow: 0 0 28px rgba(245,182,66,.15); }

    h1{ font-size:1.5rem; margin:0 0 .5rem; }
    .subtitle{ font-size:.9rem; color:#ccc; margin-bottom:1.2rem; line-height:1.6; }
    .question-text{ font-size:1.05rem; margin-bottom:1rem; line-height:1.55; white-space:pre-wrap; }
    .progress{ font-size:.8rem; color:#aaa; margin-bottom:.5rem; }
    .choices{ display:flex; flex-direction:column; gap:10px; margin-bottom:16px; }
    button{
      border:none; border-radius:999px;
      padding:12px 18px; font-size:.95rem;
      cursor:pointer;
      transition: transform .1s ease, box-shadow .1s ease, background .15s ease, border-color .15s ease;
      user-select:none;
    }
    button:active{ transform:translateY(1px); box-shadow:none; }
    .btn-main{
      background:linear-gradient(135deg,#e50914,#f5b642);
      color:#111; font-weight:700; width:100%;
    }
    .btn-choice{
      width:100%; text-align:left;
      background:#252525; color:#f7f7f7;
      border:1px solid #444;
      line-height:1.45;
      white-space:pre-wrap;
    }
    .btn-choice.selectedA{ border-color:#f5b642; background:rgba(245,182,66,.2); }
    .btn-choice.selectedB{ border-color:#e50914; background:rgba(229,9,20,.2); }
    .nav-buttons{ display:flex; justify-content:space-between; gap:8px; margin-top:8px; }
    .btn-secondary{
      background:#2a2a2a; color:#f7f7f7;
      border:1px solid #444; flex:1;
    }
    .btn-secondary:disabled, .btn-next:disabled{ opacity:.4; cursor:default; }
    .btn-next{ background:#e50914; color:#fff; flex:1; border:1px solid rgba(255,255,255,.08); }
    .result-block{ margin-bottom:12px; font-size:.95rem; line-height:1.65; }
    .badge{
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      font-size:.75rem;
      margin-left:6px;
      background:#333; color:#eee;
      vertical-align:middle;
    }
    .rainy-highlight{ color:#f5b642; font-weight:800; }

    @media (max-width:480px){
      .card{ border-radius:0; height:100vh; max-width:100%; }
    }
  </style>
</head>

<body>
<div class="card" id="app"><!-- JSã§å·®ã—æ›¿ãˆ --></div>

<script>
  // ===================================================
  // â‘  ãƒ¡ã‚¤ãƒ³ï¼šåœ°ç„16 + åŒºåˆ‡ã‚Š1 + å¤©å›½16ï¼ˆ33å•ï¼‰
  // ===================================================
  const questions = [
    // ========= ğŸ˜ˆ åœ°ç„ã®2æŠï¼ˆ16å•ï¼‰ =========
    { text:"å«Œã‚ã‚Œãªã„äººç”Ÿ vs ãªã‚ã‚‰ã‚Œãªã„äººç”Ÿ", choiceA:"å«Œã‚ã‚Œãªã„", choiceB:"ãªã‚ã‚‰ã‚Œãªã„", rainyAnswer:"B" },
    { text:"ãšã£ã¨è¬ã‚Šç¶šã‘ã‚‹ vs ãšã£ã¨è¨€ã„è¨³ã—ç¶šã‘ã‚‹", choiceA:"è¬ã‚Šç¶šã‘ã‚‹", choiceB:"è¨€ã„è¨³ã—ç¶šã‘ã‚‹", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ æ°—ã¾ãšã„æ²ˆé»™ vs ä¸€ç”Ÿ æµ…ã„é›‘è«‡", choiceA:"æ°—ã¾ãšã„æ²ˆé»™", choiceB:"æµ…ã„é›‘è«‡", rainyAnswer:"A" },
    { text:"æ¯æ—¥ ä¸Šå¸ã«è©°ã‚ã‚‰ã‚Œã‚‹ vs æ¯æ—¥ éƒ¨ä¸‹ã«è£åˆ‡ã‚‰ã‚Œã‚‹", choiceA:"ä¸Šå¸ã«è©°ã‚ã‚‰ã‚Œã‚‹", choiceB:"éƒ¨ä¸‹ã«è£åˆ‡ã‚‰ã‚Œã‚‹", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ é ¼ã‚Œãªã„ vs ä¸€ç”Ÿ é ¼ã‚‰ã‚Œã™ãã‚‹", choiceA:"é ¼ã‚Œãªã„", choiceB:"é ¼ã‚‰ã‚Œã™ãã‚‹", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ æœ¬éŸ³ã—ã‹è¨€ãˆãªã„ vs ä¸€ç”Ÿ ã‚¦ã‚½ã—ã‹è¨€ãˆãªã„", choiceA:"æœ¬éŸ³ã—ã‹è¨€ãˆãªã„", choiceB:"ã‚¦ã‚½ã—ã‹è¨€ãˆãªã„", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ äºˆå®šãŒç‹‚ã† vs ä¸€ç”Ÿ äºˆå®šé€šã‚Šã§é€€å±ˆ", choiceA:"äºˆå®šãŒç‹‚ã†", choiceB:"äºˆå®šé€šã‚Šã§é€€å±ˆ", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ èª¤è§£ã•ã‚Œç¶šã‘ã‚‹ vs ä¸€ç”Ÿ æœŸå¾…ã•ã‚Œç¶šã‘ã‚‹", choiceA:"èª¤è§£ã•ã‚Œç¶šã‘ã‚‹", choiceB:"æœŸå¾…ã•ã‚Œç¶šã‘ã‚‹", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ é¸æŠã‚’è¿«ã‚‰ã‚Œã‚‹ vs ä¸€ç”Ÿ é¸æŠè‚¢ãŒãªã„", choiceA:"é¸æŠã‚’è¿«ã‚‰ã‚Œã‚‹", choiceB:"é¸æŠè‚¢ãŒãªã„", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ ç›¸è«‡ã•ã‚Œãªã„ vs ä¸€ç”Ÿ ç›¸è«‡ã•ã‚Œç¶šã‘ã‚‹", choiceA:"ç›¸è«‡ã•ã‚Œãªã„", choiceB:"ç›¸è«‡ã•ã‚Œç¶šã‘ã‚‹", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ è©•ä¾¡ã•ã‚Œãªã„åŠªåŠ› vs ä¸€ç”Ÿ è©•ä¾¡ã•ã‚Œã‚‹å®ŸåŠ›ä¸è¶³", choiceA:"è©•ä¾¡ã•ã‚Œãªã„åŠªåŠ›", choiceB:"è©•ä¾¡ã•ã‚Œã‚‹å®ŸåŠ›ä¸è¶³", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ äºˆå®šã‚’å®ˆã‚‰ã•ã‚Œã‚‹ vs ä¸€ç”Ÿ äºˆå®šã‚’å®ˆã‚‰ã‚Œãªã„", choiceA:"å®ˆã‚‰ã•ã‚Œã‚‹", choiceB:"å®ˆã‚‰ã‚Œãªã„", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ äººã«åˆã‚ã›ç¶šã‘ã‚‹ vs ä¸€ç”Ÿ äººã«åˆã‚ã›ã¦ã‚‚ã‚‰ã†", choiceA:"åˆã‚ã›ç¶šã‘ã‚‹", choiceB:"åˆã‚ã›ã¦ã‚‚ã‚‰ã†", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ å®‰å¿ƒã§ããªã„æˆåŠŸ vs ä¸€ç”Ÿ å®‰å¿ƒã ã‘ã®å¤±æ•—", choiceA:"å®‰å¿ƒã§ããªã„æˆåŠŸ", choiceB:"å®‰å¿ƒã ã‘ã®å¤±æ•—", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ æ³¨ç›®ã•ã‚Œç¶šã‘ã‚‹ vs ä¸€ç”Ÿ å­˜åœ¨æ„Ÿã‚¼ãƒ­", choiceA:"æ³¨ç›®ã•ã‚Œç¶šã‘ã‚‹", choiceB:"å­˜åœ¨æ„Ÿã‚¼ãƒ­", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ èª°ã‹ã«ä¾å­˜ã•ã‚Œã‚‹ vs ä¸€ç”Ÿ èª°ã«ã‚‚é ¼ã‚‰ã‚Œãªã„", choiceA:"ä¾å­˜ã•ã‚Œã‚‹", choiceB:"é ¼ã‚‰ã‚Œãªã„", rainyAnswer:"B" },

    // ========= ğŸŒˆ åŒºåˆ‡ã‚Šï¼ˆæ¼”å‡ºç”¨ãƒ»æ¡ç‚¹ã—ãªã„ï¼‰ =========
    { text:"ğŸ˜‡ åœ°ç„ã‚’æŠœã‘ã¾ã—ãŸã€‚\nã“ã“ã‹ã‚‰ã¯å¤©å›½ã®2æŠã§ã™ã€‚", choiceA:"å¤©å›½ã¸é€²ã‚€", choiceB:"è¦šæ‚Ÿã¯ã§ããŸ", rainyAnswer:null },

    // ========= ğŸ˜‡ å¤©å›½ã®2æŠï¼ˆ16å•ï¼‰ =========
    { text:"ä¸€ç”Ÿ å®‰å¿ƒ vs ä¸€ç”Ÿ ãƒ¯ã‚¯ãƒ¯ã‚¯", choiceA:"å®‰å¿ƒ", choiceB:"ãƒ¯ã‚¯ãƒ¯ã‚¯", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ ç†è§£ã•ã‚Œã‚‹ vs ä¸€ç”Ÿ è‡ªç”±ã§ã„ã‚‰ã‚Œã‚‹", choiceA:"ç†è§£ã•ã‚Œã‚‹", choiceB:"è‡ªç”±ã§ã„ã‚‰ã‚Œã‚‹", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ ãŠé‡‘ã«å›°ã‚‰ãªã„ vs ä¸€ç”Ÿ æ™‚é–“ã«è¿½ã‚ã‚Œãªã„", choiceA:"ãŠé‡‘ã«å›°ã‚‰ãªã„", choiceB:"æ™‚é–“ã«è¿½ã‚ã‚Œãªã„", rainyAnswer:"B" },
    { text:"ç§°è³›ã•ã‚Œã‚‹å¤©æ‰ vs æ„›ã•ã‚Œã‚‹å‡¡äºº", choiceA:"ç§°è³›ã•ã‚Œã‚‹å¤©æ‰", choiceB:"æ„›ã•ã‚Œã‚‹å‡¡äºº", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ è‡ªä¿¡ãŒã‚ã‚‹ vs ä¸€ç”Ÿ ä¸å®‰ãŒãªã„", choiceA:"è‡ªä¿¡ãŒã‚ã‚‹", choiceB:"ä¸å®‰ãŒãªã„", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ å¿ƒãŒç©ã‚„ã‹ vs ä¸€ç”Ÿ æ„Ÿå‹•ãŒå¤šã„", choiceA:"å¿ƒãŒç©ã‚„ã‹", choiceB:"æ„Ÿå‹•ãŒå¤šã„", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ å¥½ããªã“ã¨ã ã‘ vs ä¸€ç”Ÿ å¾—æ„ãªã“ã¨ã ã‘", choiceA:"å¥½ããªã“ã¨ã ã‘", choiceB:"å¾—æ„ãªã“ã¨ã ã‘", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ ã²ã¨ã‚Šæ™‚é–“ãŸã£ã·ã‚Š vs ä¸€ç”Ÿ ä»²é–“ã¨ä¸€ç·’", choiceA:"ã²ã¨ã‚Šæ™‚é–“", choiceB:"ä»²é–“ã¨ä¸€ç·’", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ ä»Šã®ã¾ã¾ã§OKã¨è¨€ã‚ã‚Œã‚‹ vs ä¸€ç”Ÿ ã‚‚ã£ã¨æœŸå¾…ã•ã‚Œã‚‹", choiceA:"ä»Šã®ã¾ã¾ã§OK", choiceB:"ã‚‚ã£ã¨æœŸå¾…ã•ã‚Œã‚‹", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ å¤±æ•—ã—ãªã„ vs ä¸€ç”Ÿ å¾Œæ‚”ã—ãªã„", choiceA:"å¤±æ•—ã—ãªã„", choiceB:"å¾Œæ‚”ã—ãªã„", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ èª°ã‹ã®ä¸€ç•ª vs ä¸€ç”Ÿ ã¿ã‚“ãªã«å¥½ã‹ã‚Œã‚‹", choiceA:"èª°ã‹ã®ä¸€ç•ª", choiceB:"ã¿ã‚“ãªã«å¥½ã‹ã‚Œã‚‹", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ è‡ªåˆ†ã‚’ä¿¡ã˜ã‚‰ã‚Œã‚‹ vs ä¸€ç”Ÿ äººã‚’ä¿¡ã˜ã‚‰ã‚Œã‚‹", choiceA:"è‡ªåˆ†ã‚’ä¿¡ã˜ã‚‰ã‚Œã‚‹", choiceB:"äººã‚’ä¿¡ã˜ã‚‰ã‚Œã‚‹", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ å¿…è¦ã¨ã•ã‚Œã‚‹ vs ä¸€ç”Ÿ å°Šæ•¬ã•ã‚Œã‚‹", choiceA:"å¿…è¦ã¨ã•ã‚Œã‚‹", choiceB:"å°Šæ•¬ã•ã‚Œã‚‹", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ ç©ã‚„ã‹ãªæ—¥å¸¸ vs ä¸€ç”Ÿ å¿˜ã‚Œã‚‰ã‚Œãªã„ç¬é–“", choiceA:"ç©ã‚„ã‹ãªæ—¥å¸¸", choiceB:"å¿˜ã‚Œã‚‰ã‚Œãªã„ç¬é–“", rainyAnswer:"A" },
    { text:"ä¸€ç”Ÿ é¸ã°ã‚Œã‚‹å´ vs ä¸€ç”Ÿ é¸ã¶å´", choiceA:"é¸ã°ã‚Œã‚‹å´", choiceB:"é¸ã¶å´", rainyAnswer:"B" },
    { text:"ä¸€ç”Ÿ è‡ªåˆ†ã‚’å¥½ãã§ã„ã‚‰ã‚Œã‚‹ vs ä¸€ç”Ÿ æ„›ã•ã‚Œç¶šã‘ã‚‹", choiceA:"è‡ªåˆ†ã‚’å¥½ãã§ã„ã‚‰ã‚Œã‚‹", choiceB:"æ„›ã•ã‚Œç¶šã‘ã‚‹", rainyAnswer:"A" }
  ];

  const rainyType = "ä½œè€…ï¼šRainyï¼ˆã‚¿ã‚¤ãƒ—5ï¼‰";

  // ===================================================
  // â‘¡ ã‚¨ãƒ‹ã‚¢åˆ¤å®šï¼ˆ18å•ãƒ»ãƒœã‚¿ãƒ³ã«æ–‡ç« ã‚’å‡ºã™ç‰ˆï¼‰
  //    A/Bã‚’é¸ã¶ã¨ã€ãã‚Œãã‚Œåˆ¥ã‚¿ã‚¤ãƒ—ã«1ç‚¹
  // ===================================================
  const typeNames = {
    1: "ã‚¿ã‚¤ãƒ—1ï¼ˆæ”¹é©ï¼‰",
    2: "ã‚¿ã‚¤ãƒ—2ï¼ˆåŠ©ã‘ã‚‹ï¼‰",
    3: "ã‚¿ã‚¤ãƒ—3ï¼ˆé”æˆï¼‰",
    4: "ã‚¿ã‚¤ãƒ—4ï¼ˆå€‹æ€§ï¼‰",
    5: "ã‚¿ã‚¤ãƒ—5ï¼ˆåˆ†æï¼‰",
    6: "ã‚¿ã‚¤ãƒ—6ï¼ˆå …å®Ÿï¼‰",
    7: "ã‚¿ã‚¤ãƒ—7ï¼ˆç†±ä¸­ï¼‰",
    8: "ã‚¿ã‚¤ãƒ—8ï¼ˆæŒ‘æˆ¦ï¼‰",
    9: "ã‚¿ã‚¤ãƒ—9ï¼ˆå¹³å’Œï¼‰"
  };

  const typeRoast = {
    1: "æ­£ã—ã•ã‚»ãƒ³ã‚µãƒ¼å¸¸æ™‚ONã€‚è„³å†…ã«ç›£æŸ»å®˜ã„ã‚‹ã‚¿ã‚¤ãƒ—ã€‚",
    2: "æ°—ã¥ã„ãŸã‚‰ä¸–è©±ç„¼ã„ã¦ã‚‹ã€‚å„ªã—ã•ã§ä¸–ç•Œã‚’ä¾µç•¥ã™ã‚‹ã‚¿ã‚¤ãƒ—ã€‚",
    3: "çµæœã§èªã‚‹ã€‚ç››ã‚Œã¦ãªã„ã¨å……é›»åˆ‡ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã€‚",
    4: "å”¯ä¸€ç„¡äºŒã«å‘½ã‹ã‘ã‚‹ã€‚æƒ…ç·’ãŒèŠ¸è¡“ä½œå“ã‚¿ã‚¤ãƒ—ã€‚",
    5: "æƒ…å ±ã‚’é£Ÿã¹ã¦ç”Ÿãã‚‹ã€‚é™ã‹ã«åˆ†æã—ã¦å…¨éƒ¨è¦‹ã¦ã‚‹ã‚¿ã‚¤ãƒ—ã€‚",
    6: "å±é™ºäºˆçŸ¥ã®ãƒ—ãƒ­ã€‚ç¢ºèªã—ãªãŒã‚‰æœ€å¼·ã«å …å®Ÿãªã‚¿ã‚¤ãƒ—ã€‚",
    7: "æ¥½ã—ã•æœ€å„ªå…ˆã€‚æœªæ¥ã®ãƒ¯ã‚¯ãƒ¯ã‚¯ã‚’å‰å€Ÿã‚Šã™ã‚‹ã‚¿ã‚¤ãƒ—ã€‚",
    8: "å¼·ãå‡ºã¦å®ˆã‚‹ã€‚æ­£é¢çªç ´ã§å ´ã‚’å‹•ã‹ã™ã‚¿ã‚¤ãƒ—ã€‚",
    9: "å¹³å’Œã®å®ˆè­·ç¥ã€‚æ‰ã‚ãã†ãªç©ºæ°—ã‚’æº¶ã‹ã™ã‚¿ã‚¤ãƒ—ã€‚"
  };

  const ennea18 = [
    { text:"1) ã©ã£ã¡ã®ã‚¹ã‚¤ãƒƒãƒãŒå…¥ã‚Šã‚„ã™ã„ï¼Ÿ", choiceA:"Aï¼šæ­£ã—ãæ•´ã£ã¦ãªã„ã¨ãƒ ã‚ºãƒ ã‚ºã™ã‚‹", choiceB:"Bï¼šä¸å®‰è¦ç´ ãŒã‚ã‚‹ã¨ãƒ ã‚ºãƒ ã‚ºã™ã‚‹", typeA:1, typeB:6 },
    { text:"2) å¬‰ã—ã„ã®ã¯ã©ã£ã¡ï¼Ÿ", choiceA:"Aï¼šé ¼ã‚‰ã‚Œã¦å½¹ã«ç«‹ã¦ãŸ", choiceB:"Bï¼šçµæœã‚’å‡ºã—ã¦èªã‚ã‚‰ã‚ŒãŸ", typeA:2, typeB:3 },
    { text:"3) ã—ã‚“ã©ã„ã®ã¯ã©ã£ã¡ï¼Ÿ", choiceA:"Aï¼šå¹³å‡¡æ‰±ã„ã•ã‚Œã‚‹", choiceB:"Bï¼šç„¡çŸ¥æ‰±ã„ã•ã‚Œã‚‹", typeA:4, typeB:5 },
    { text:"4) å‹•ãæ–¹ãŒè¿‘ã„ã®ã¯ï¼Ÿ", choiceA:"Aï¼šæ¥½ã—ã„æ–¹ã«åˆ‡ã‚Šæ›¿ãˆã¦é€²ã‚€", choiceB:"Bï¼šä¸»å°æ¨©æ¡ã£ã¦ä¸€æ°—ã«é€²ã‚ã‚‹", typeA:7, typeB:8 },
    { text:"5) ãã®å ´ã§å„ªå…ˆã—ãŒã¡ãªã®ã¯ï¼Ÿ", choiceA:"Aï¼šæ³¢é¢¨ç«‹ã¦ãšã«ä¸¸ãåã‚ã‚‹", choiceB:"Bï¼šæ­£é¢ã‹ã‚‰ãƒãƒƒã‚­ãƒªã•ã›ã‚‹", typeA:9, typeB:8 },
    { text:"6) è‡ªåˆ†ã«è¿‘ã„ã®ã¯ï¼Ÿ", choiceA:"Aï¼šç†æƒ³ã®åŸºæº–ãŒé«˜ã„ï¼ˆç›´ã—ãŸããªã‚‹ï¼‰", choiceB:"Bï¼šäººã®ãƒ‹ãƒ¼ã‚ºã«æ•æ„Ÿï¼ˆæ°—ã¥ã„ã¦ã—ã¾ã†ï¼‰", typeA:1, typeB:2 },
    { text:"7) å¿ƒãŒå‹•ãã®ã¯ï¼Ÿ", choiceA:"Aï¼šå‹ã¡ç­‹ãŒè¦‹ãˆã‚‹ã¨ç‡ƒãˆã‚‹", choiceB:"Bï¼šå”¯ä¸€ç„¡äºŒã®æ„å‘³ãŒã‚ã‚‹ã¨ç‡ƒãˆã‚‹", typeA:3, typeB:4 },
    { text:"8) è½ã¡ç€ãã®ã¯ï¼Ÿ", choiceA:"Aï¼šä¸€äººã§é›†ä¸­ã—ã¦æ·±æ˜ã‚Š", choiceB:"Bï¼šã¿ã‚“ãªã§ãƒ¯ã‚¤ãƒ¯ã‚¤ç››ã‚Šä¸ŠãŒã‚‹", typeA:5, typeB:7 },
    { text:"9) è¡Œå‹•ã®å‰ã«å¼·ã„ã®ã¯ï¼Ÿ", choiceA:"Aï¼šç–‘ã£ã¦ç¢ºèªã—ã¦ã‹ã‚‰", choiceB:"Bï¼šã¾ã‚ã¾ã‚ã§OKã«ã—ã¦ã‹ã‚‰", typeA:6, typeB:9 },

    { text:"10) ã‚¤ãƒ©ãƒƒã¨ã™ã‚‹ã®ã¯ï¼Ÿ", choiceA:"Aï¼šç­‹ãŒé€šã£ã¦ãªã„", choiceB:"Bï¼šç©ºæ°—ãŒæ‚ªã„", typeA:1, typeB:9 },
    { text:"11) ã¤ã„å‡ºã¡ã‚ƒã†ã®ã¯ï¼Ÿ", choiceA:"Aï¼šæ”¾ã£ã¦ãŠã‘ãªãã¦æ‰‹ã‚’è²¸ã™", choiceB:"Bï¼šèƒŒä¸­ã§å¼•ã£å¼µã£ã¦çµæœå‡ºã™", typeA:2, typeB:3 },
    { text:"12) é¸ã³æ–¹ãŒè¿‘ã„ã®ã¯ï¼Ÿ", choiceA:"Aï¼šæ°—åˆ†ãƒ»æ„Ÿæ€§ã§é¸ã¶", choiceB:"Bï¼šæƒ…å ±ãƒ»è«–ç†ã§é¸ã¶", typeA:4, typeB:5 },
    { text:"13) å®‰å¿ƒã®å–ã‚Šæ–¹ã¯ï¼Ÿ", choiceA:"Aï¼šæœ€æ‚ªã‚’é¿ã‘ã‚‹ãŸã‚å‚™ãˆã‚‹", choiceB:"Bï¼šæ¥½ã—ã„æ–¹ã¸åˆ‡ã‚Šæ›¿ãˆã‚‹", typeA:6, typeB:7 },
    { text:"14) å®ˆã‚Šæ–¹ãŒè¿‘ã„ã®ã¯ï¼Ÿ", choiceA:"Aï¼šå¼·ãå‡ºã¦ã§ã‚‚å®ˆã‚‹", choiceB:"Bï¼šã¿ã‚“ãªãŒç´å¾—ã™ã‚‹å½¢ã«ã™ã‚‹", typeA:8, typeB:9 },
    { text:"15) ã¤ã„å‡ºã‚‹ã‚¯ã‚»ã¯ï¼Ÿ", choiceA:"Aï¼šæ­£ã—ã„çŠ¶æ…‹ã«æ•´ãˆãŸã„", choiceB:"Bï¼šå–œã°ã›ãŸã„ãƒ»å¥½ã‹ã‚ŒãŸã„", typeA:1, typeB:2 },
    { text:"16) ã‚®ã‚¢ãŒå…¥ã‚‹ã®ã¯ï¼Ÿ", choiceA:"Aï¼šç›®æ¨™ãŒã‚ã‚‹ã¨å…¥ã‚‹", choiceB:"Bï¼šç‰©èªæ€§ãŒã‚ã‚‹ã¨å…¥ã‚‹", typeA:3, typeB:4 },
    { text:"17) åˆ¤æ–­ãŒè¿‘ã„ã®ã¯ï¼Ÿ", choiceA:"Aï¼šé™ã‹ã«è¦³å¯Ÿã—ã¦ã‹ã‚‰è¨€ã†", choiceB:"Bï¼šå‹¢ã„ã§ã¾ãšå‹•ã„ã¦ã¿ã‚‹", typeA:5, typeB:7 },
    { text:"18) å®‰å¿ƒã®æ–¹å‘æ€§ã¯ï¼Ÿ", choiceA:"Aï¼šç–‘ã„ã‚’æ½°ã—ã¦å®‰å¿ƒã—ãŸã„", choiceB:"Bï¼šè¡çªã‚’é¿ã‘ã¦å®‰å¿ƒã—ãŸã„", typeA:6, typeB:9 }
  ];

  // ===================================================
  // å…±é€šçŠ¶æ…‹
  // ===================================================
  const appEl = document.getElementById("app");

  let currentIndex = -1;   // ãƒ¡ã‚¤ãƒ³è³ªå•
  let answers = [];        // ãƒ¡ã‚¤ãƒ³å›ç­”

  let enneaIndex = 0;      // ã‚¨ãƒ‹ã‚¢è³ªå•
  let enneaScores = null;  // ã‚¨ãƒ‹ã‚¢å¾—ç‚¹

  // ===================================================
  // ã¡ã‚‡ã„æ¼”å‡ºï¼šåœ°ç„/å¤©å›½ã®è¦‹ãŸç›®åˆ‡æ›¿
  // ===================================================
  function setMoodByIndex(idx){
    // 0ã€œ15 = åœ°ç„ / 16 = åŒºåˆ‡ã‚Š / 17ã€œ32 = å¤©å›½
    appEl.classList.remove("hell","heaven");
    const card = appEl; // #appãŒ.cardãªã®ã§ã“ã‚Œã§OK

    // #appã¯.cardã˜ã‚ƒãªã„ã®ã§ã€è¦ªã®.cardã«ä»˜ã‘ã‚‹
    const cardEl = document.querySelector(".card");
    cardEl.classList.remove("hell","heaven");

    if(idx >= 0 && idx <= 15){
      cardEl.classList.add("hell");
    }else if(idx >= 17){
      cardEl.classList.add("heaven");
    }
  }

  function eligibleTotal(){
    return questions.filter(q => q.rainyAnswer === "A" || q.rainyAnswer === "B").length;
  }

  // ===================================================
  // ç”»é¢ï¼šã‚¹ã‚¿ãƒ¼ãƒˆ
  // ===================================================
  function renderStart(){
    document.querySelector(".card").classList.remove("hell","heaven");
    appEl.innerHTML = `
      <h1>2æŠ æ€§æ ¼ã‚²ãƒ¼ãƒ </h1>
      <p class="subtitle">
        Aã‹Bã‚’ç›´æ„Ÿã§é¸ã‚“ã§ãã ã•ã„ã€‚<br>
        æœ€å¾Œã«ã€Œã‚ãªãŸã®å‚¾å‘ã€ã¨ã€ŒRainyãƒã‚¤ãƒ³ãƒˆã€<br>
        ã•ã‚‰ã«ã€Œã‚¨ãƒ‹ã‚¢åˆ¤å®šï¼ˆ18å•ï¼‰ã€ã‚‚ã§ãã¾ã™ã€‚
      </p>
      <button class="btn-main" onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    `;
  }

  // ===================================================
  // ãƒ¡ã‚¤ãƒ³ï¼šé–‹å§‹
  // ===================================================
  function startGame(){
    answers = new Array(questions.length).fill(null);
    currentIndex = 0;
    renderQuestion();
  }

  // ===================================================
  // ãƒ¡ã‚¤ãƒ³ï¼šè³ªå•
  // ===================================================
  function renderQuestion(){
    const q = questions[currentIndex];
    const total = questions.length;
    const answer = answers[currentIndex];

    setMoodByIndex(currentIndex);

    appEl.innerHTML = `
      <div class="progress">Q${currentIndex + 1} / ${total}</div>
      <h1>2æŠ æ€§æ ¼ã‚²ãƒ¼ãƒ </h1>
      <div class="question-text">${q.text}</div>

      <div class="choices">
        <button class="btn-choice ${answer === "A" ? "selectedA" : ""}" onclick="selectAnswer('A')">
          ${q.choiceA}
        </button>
        <button class="btn-choice ${answer === "B" ? "selectedB" : ""}" onclick="selectAnswer('B')">
          ${q.choiceB}
        </button>
      </div>

      <div class="nav-buttons">
        <button class="btn-secondary" onclick="prevQuestion()" ${currentIndex === 0 ? "disabled" : ""}>
          â† ã‚‚ã©ã‚‹
        </button>
        <button class="btn-next" onclick="nextOrFinish()" ${answer === null ? "disabled" : ""}>
          ${currentIndex === total - 1 ? "çµæœã‚’è¦‹ã‚‹ â†’" : "æ¬¡ã¸ â†’"}
        </button>
      </div>
    `;
  }

  function selectAnswer(choice){
    answers[currentIndex] = choice;
    renderQuestion();
  }

  function prevQuestion(){
    if(currentIndex > 0){
      currentIndex--;
      renderQuestion();
    }
  }

  function nextOrFinish(){
    const total = questions.length;
    if(currentIndex < total - 1){
      currentIndex++;
      renderQuestion();
    }else{
      renderResult();
    }
  }

  // ===================================================
  // ãƒ¡ã‚¤ãƒ³ï¼šçµæœ
  // ===================================================
  function renderResult(){
    document.querySelector(".card").classList.remove("hell","heaven");

    const countA = answers.filter(a => a === "A").length;
    const countB = answers.filter(a => a === "B").length;

    let rainyPoint = 0;
    answers.forEach((ans, i) => {
      const ra = questions[i].rainyAnswer;
      if((ra === "A" || ra === "B") && ans === ra) rainyPoint++;
    });

    const totalEligible = eligibleTotal();

    let modeComment = "";
    if(rainyPoint === totalEligible){
      modeComment = "ä»Šæ—¥ã¯ã»ã¼Type5ã‚¯ãƒ­ãƒ¼ãƒ³ã§ã™ï¼ˆç¬‘ï¼‰";
    }else if(rainyPoint > totalEligible * 0.6){
      modeComment = "Type5ã¨æ„Ÿè¦šãŒã‹ãªã‚Šè¿‘ã„æ—¥ã‹ã‚‚ã€‚å†·é™ãƒ»åˆç†ãƒ¢ãƒ¼ãƒ‰å¼·ã‚ã€‚";
    }else if(rainyPoint === 0){
      modeComment = "Type5ã¨çœŸé€†ã‚³ãƒ¼ã‚¹ï¼ãœã‚“ãœã‚“é•ã†è¦–ç‚¹ã‚’æŒã£ã¦ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚";
    }else if(rainyPoint < totalEligible * 0.3){
      modeComment = "Type5ã¨ã¯é•ã†é¸æŠãŒå¤šã‚ã€‚å€‹æ€§æ´¾ãƒ»ã‚ªãƒªã‚¸ãƒŠãƒ«æ€è€ƒã‚¿ã‚¤ãƒ—ã€‚";
    }else{
      modeComment = "ã¨ã“ã‚ã©ã“ã‚Type5ã¨é‡ãªã‚Šã¤ã¤ã€ã‚ãªãŸç‹¬è‡ªã®é¸æŠãŒå…‰ã£ã¦ã¾ã™ã€‚";
    }

    const rainyExplain =
      "â€»Rainyãƒã‚¤ãƒ³ãƒˆï¼šä½œè€…ï¼ˆRainyï¼‰ãŒã‚¿ã‚¤ãƒ—5ãªã®ã§ã€" +
      "ã€ŒRainyãŒé¸ã³ãã†ãªæ–¹ã€ã¨åŒã˜ã ã¨1ç‚¹ã€‚é«˜ã„ã»ã©â€œä»Šæ—¥ã®æ€è€ƒã®ã‚¯ã‚»ãŒã‚¿ã‚¤ãƒ—5å¯„ã‚Šâ€ã¨ã„ã†ã ã‘ã§ã€æ­£è§£ãƒ»ä¸æ­£è§£ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚";

    appEl.innerHTML = `
      <h1>çµæœ</h1>

      <div class="result-block">
        ã‚ãªãŸã®å›ç­”ï¼š<br>
        Aï¼š${countA}å• ï¼ Bï¼š${countB}å•
      </div>

      <div class="result-block">
        <span class="rainy-highlight">Rainyãƒã‚¤ãƒ³ãƒˆï¼š</span>
        ${rainyPoint} / ${totalEligible}
        <span class="badge">${rainyType}</span>
      </div>

      <div class="result-block">${modeComment}</div>

      <p class="subtitle">${rainyExplain}</p>

      <div class="choices">
        <button class="btn-main" onclick="startEnnea18()">ã‚¨ãƒ‹ã‚¢åˆ¤å®šï¼ˆ18å•ï¼‰ã‚‚ã‚„ã‚‹</button>
        <button class="btn-secondary" onclick="startGame()">ã‚‚ã†ä¸€åº¦ï¼ˆ2æŠã‚²ãƒ¼ãƒ ï¼‰</button>
        <button class="btn-secondary" onclick="renderStart()">æœ€åˆã«æˆ»ã‚‹</button>
      </div>
    `;
  }

  // ===================================================
  // ã‚¨ãƒ‹ã‚¢ï¼šé–‹å§‹
  // ===================================================
  function startEnnea18(){
    enneaIndex = 0;
    enneaScores = {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0};
    renderEnneaQuestion();
  }

  // ===================================================
  // ã‚¨ãƒ‹ã‚¢ï¼šè³ªå•ï¼ˆãƒœã‚¿ãƒ³ã«æ–‡ç« ï¼‰
  // ===================================================
  function renderEnneaQuestion(){
    const q = ennea18[enneaIndex];
    const total = ennea18.length;

    // ã‚¨ãƒ‹ã‚¢ã¯ â€œå¤©å›½ã£ã½ã„â€ è¦‹ãŸç›®ã§å›ºå®šï¼ˆæ°—åˆ†ä¸Šã’ï¼‰
    const cardEl = document.querySelector(".card");
    cardEl.classList.remove("hell");
    cardEl.classList.add("heaven");

    appEl.innerHTML = `
      <div class="progress">ã‚¨ãƒ‹ã‚¢ ${enneaIndex + 1} / ${total}</div>
      <h1>ã‚¨ãƒ‹ã‚¢åˆ¤å®šï¼ˆ18å•ï¼‰</h1>
      <div class="question-text">${q.text}</div>

      <div class="choices">
        <button class="btn-choice" onclick="answerEnnea('A')">${q.choiceA}</button>
        <button class="btn-choice" onclick="answerEnnea('B')">${q.choiceB}</button>
      </div>

      <div class="nav-buttons">
        <button class="btn-secondary" onclick="prevEnnea()" ${enneaIndex === 0 ? "disabled" : ""}>â† ã‚‚ã©ã‚‹</button>
        <button class="btn-next" onclick="skipEnnea()">ã‚¹ã‚­ãƒƒãƒ— â†’</button>
      </div>

      <p class="subtitle">
        â€»ç›´æ„Ÿã§OKã€‚è¿·ã£ãŸã‚‰â€œä»Šã®è‡ªåˆ†â€ã§é¸ã‚“ã§ã­ã€‚
      </p>
    `;
  }

  function answerEnnea(choice){
    const q = ennea18[enneaIndex];
    const t = (choice === "A") ? q.typeA : q.typeB;
    enneaScores[t]++;

    enneaIndex++;
    if(enneaIndex < ennea18.length){
      renderEnneaQuestion();
    }else{
      renderEnneaResult();
    }
  }

  function prevEnnea(){
    if(enneaIndex <= 0) return;

    // ã²ã¨ã¤æˆ»ã‚‹å ´åˆã€ç›´å‰ã®åŠ ç‚¹ã‚’æˆ»ã™ï¼ˆç°¡æ˜“ç‰ˆï¼šç›´å‰ã¯å¿…ãš1å›ã ã‘åŠ ç‚¹ã•ã‚Œã¦ã‚‹å‰æï¼‰
    // å³å¯†ã«ã‚„ã‚‹ãªã‚‰å±¥æ­´é…åˆ—ã‚’æŒã¤ãŒã€ä»Šå›ã¯å¿˜å¹´ä¼šç”¨é€”ãªã®ã§è»½é‡ã§OKã«ã™ã‚‹
    // â†’ ã‚¹ã‚­ãƒƒãƒ—ã‚’ä½¿ã£ãŸå ´åˆã«ã‚ºãƒ¬ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€æˆ»ã‚‹ã¯â€œé›°å›²æ°—â€æ‰±ã„
    enneaIndex--;
    renderEnneaQuestion();
  }

  function skipEnnea(){
    // ã‚¹ã‚­ãƒƒãƒ—ã¯åŠ ç‚¹ãªã—ã§é€²ã‚€
    enneaIndex++;
    if(enneaIndex < ennea18.length){
      renderEnneaQuestion();
    }else{
      renderEnneaResult();
    }
  }

  // ===================================================
  // ã‚¨ãƒ‹ã‚¢ï¼šçµæœï¼ˆä¸Šä½3ï¼‹æ¿ƒã„ãƒ„ãƒƒã‚³ãƒŸï¼‰
  // ===================================================
  function renderEnneaResult(){
    const ranking = Object.entries(enneaScores)
      .map(([t,s]) => ({t:Number(t), s}))
      .sort((a,b)=> b.s - a.s);

    const top = ranking[0];
    const top3 = ranking.slice(0,3);

    const top3Html = top3.map(x => `${typeNames[x.t]}ï¼š<span class="rainy-highlight">${x.s}ç‚¹</span>`).join("<br>");
    const roast = typeRoast[top.t];

    const cardEl = document.querySelector(".card");
    cardEl.classList.remove("hell");
    cardEl.classList.add("heaven");

    appEl.innerHTML = `
      <h1>ã‚¨ãƒ‹ã‚¢çµæœ</h1>

      <div class="result-block">
        <span class="rainy-highlight">ã‚ãªãŸã¯ ${typeNames[top.t]} ã®å‚¾å‘ãŒå¼·ã‚ï¼</span>
        <span class="badge">TOP</span>
      </div>

      <div class="result-block">${roast}</div>

      <div class="result-block">
        <span class="badge">ä¸Šä½3ã‚¿ã‚¤ãƒ—</span><br>
        ${top3Html}
      </div>

      <p class="subtitle">
        â€»ã“ã‚Œã¯â€œãƒŸãƒ‹åˆ¤å®šï¼ˆ18å•ï¼‰â€ãªã®ã§å›ºå®šãƒ©ãƒ™ãƒ«ã¨ã„ã†ã‚ˆã‚Šã€Œä»Šæ—¥ã®ã‚¯ã‚»ã€å¯„ã‚Šã€‚<br>
        ã§ã‚‚ä¸Šä½3ã¤ã¯ã€Œã„ã¤ã‚‚ã®è‡ªåˆ†ã€ã‚‚æ··ã–ã‚Šã‚„ã™ã„ã‚ˆã€‚
      </p>

      <div class="choices">
        <button class="btn-main" onclick="startEnnea18()">ã‚‚ã†ä¸€åº¦ï¼ˆã‚¨ãƒ‹ã‚¢18å•ï¼‰</button>
        <button class="btn-secondary" onclick="startGame()">2æŠã‚²ãƒ¼ãƒ ã‹ã‚‰ã‚„ã‚‹</button>
        <button class="btn-secondary" onclick="renderStart()">æœ€åˆã«æˆ»ã‚‹</button>
      </div>
    `;
  }

  // åˆæœŸè¡¨ç¤º
  renderStart();
</script>
</body>
</html>
