<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>エニアグラム簡易タイプ診断</title>
<style>
  :root { 
    --primary: #00797b; 
    --primary-light: #e6f2f2;
    --bg: #f4f7f9; 
    --card: #ffffff; 
    --muted: #667085; 
    --accent: #0284c7;
  }
  body { 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
    background: var(--bg); 
    margin: 0; 
    color: #333; 
    line-height: 1.6;
  }
  header { 
    padding: 24px 16px; 
    background: var(--card); 
    border-bottom: 1px solid #e5e7eb; 
    text-align: center;
  }
  header h1 { font-size: 22px; margin: 0 0 8px; color: var(--primary); }
  
  main { max-width: 600px; margin: 0 auto; padding: 20px 16px 100px; }
  
  .instruction-card { 
    background: #fff; 
    border-left: 4px solid var(--primary); 
    padding: 16px; 
    border-radius: 8px; 
    margin-bottom: 24px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }

  .card { 
    background: var(--card); 
    border: 1px solid #e5e7eb; 
    border-radius: 12px; 
    padding: 20px; 
    margin: 16px 0; 
    transition: transform 0.2s;
  }
  .q-title { font-weight: 700; margin-bottom: 12px; font-size: 17px; }
  
  /* 選択肢のスタイリング */
  .opt { 
    display: flex; 
    align-items: center; 
    padding: 12px 16px; 
    border-radius: 8px; 
    border: 2px solid #edf2f7; 
    margin: 8px 0; 
    cursor: pointer; 
    transition: all 0.2s;
  }
  .opt:hover { background-color: var(--primary-light); }
  /* ラジオボタンがチェックされた時のスタイル */
  .opt:has(input:checked) { 
    border-color: var(--primary); 
    background-color: var(--primary-light); 
  }
  .opt input { margin-right: 12px; cursor: pointer; }

  .muted { color: var(--muted); font-size: 13px; margin-top: 8px; }

  .actions { 
    position: fixed; 
    bottom: 0; 
    left: 0; 
    right: 0; 
    background: rgba(255,255,255,0.95); 
    backdrop-filter: blur(8px);
    border-top: 1px solid #e5e7eb; 
    padding: 16px; 
    display: flex; 
    justify-content: center; 
    gap: 12px; 
    z-index: 100;
  }
  button { 
    flex: 1; 
    max-width: 200px;
    background: var(--primary); 
    color: #fff; 
    border: none; 
    border-radius: 30px; 
    padding: 14px; 
    font-weight: 700; 
    cursor: pointer; 
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  button.secondary { background: #94a3b8; }
  button:active { transform: translateY(2px); }

  /* 結果表示 */
  .result-area { 
    margin-top: 30px; 
    padding: 24px; 
    border-radius: 16px; 
    background: #fff; 
    border: 2px solid var(--primary);
    animation: fadeIn 0.5s ease-out;
  }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

  .candidate-badge {
    display: block;
    font-size: 20px;
    color: var(--primary);
    font-weight: bold;
    margin: 10px 0;
    padding: 10px;
    background: var(--primary-light);
    border-radius: 8px;
    text-align: center;
  }
  
  .score-tag { 
    display: inline-block; 
    padding: 4px 10px; 
    border-radius: 6px; 
    background: #f1f5f9; 
    margin: 4px; 
    font-size: 13px;
  }
  .top-score { background: #ffedd5; color: #9a3412; font-weight: bold; }

  details { margin-top: 16px; border-top: 1px solid #eee; padding-top: 12px; }
  summary { cursor: pointer; color: var(--muted); font-weight: 600; }
</style>
</head>
<body>

<header>
  <h1>エニアグラム簡易タイプ診断</h1>
  <div class="muted">IT講座デモ用：自己理解のきっかけに</div>
</header>

<main>
  <div class="instruction-card">
    <p style="margin:0;"><strong>診断方法：</strong> 9つの問いに対し、今のあなたに最も近いものを直感で選んでください。</p>
  </div>

  <form id="quiz">
    <div class="card">
      <div class="q-title">Q1. 物事を正しく整え、ルールや品質にこだわるほうだ。</div>
      <label class="opt"><input type="radio" name="q1" value="2" required>当てはまる</label>
      <label class="opt"><input type="radio" name="q1" value="1">どちらともいえない</label>
      <label class="opt"><input type="radio" name="q1" value="0">当てはまらない</label>
      <div class="muted">（理想を追求し、自分を律する傾向）</div>
    </div>

    <div class="card">
      <div class="q-title">Q2. 人の役に立つと嬉しく、ついサポート役を買って出る。</div>
      <label class="opt"><input type="radio" name="q2" value="2" required>当てはまる</label>
      <label class="opt"><input type="radio" name="q2" value="1">どちらともいえない</label>
      <label class="opt"><input type="radio" name="q2" value="0">当てはまらない</label>
      <div class="muted">（人の感情に敏感で、助け合いたい傾向）</div>
    </div>

    <div class="card">
      <div class="q-title">Q3. 目標達成や成果で評価されると燃える。</div>
      <label class="opt"><input type="radio" name="q3" value="2" required>当てはまる</label>
      <label class="opt"><input type="radio" name="q3" value="1">どちらともいえない</label>
      <label class="opt"><input type="radio" name="q3" value="0">当てはまらない</label>
      <div class="muted">（効率を重視し、成功を追い求める傾向）</div>
    </div>

    <div class="card">
      <div class="q-title">Q4. 自分らしさや独自性を表現したい気持ちが強い。</div>
      <label class="opt"><input type="radio" name="q4" value="2" required>当てはまる</label>
      <label class="opt"><input type="radio" name="q4" value="1">どちらともいえない</label>
      <label class="opt"><input type="radio" name="q4" value="0">当てはまらない</label>
      <div class="muted">（内面を見つめ、個性的でありたい傾向）</div>
    </div>

    <div class="card">
      <div class="q-title">Q5. 観察・分析が好きで、まず情報を集めてから動く。</div>
      <label class="opt"><input type="radio" name="q5" value="2" required>当てはまる</label>
      <label class="opt"><input type="radio" name="q5" value="1">どちらともいえない</label>
      <label class="opt"><input type="radio" name="q5" value="0">当てはまらない</label>
      <div class="muted">（知識を蓄え、客観的に分析する傾向）</div>
    </div>

    <div class="card">
      <div class="q-title">Q6. 物事を慎重に検討し、信頼できる人や仕組みを重視する。</div>
      <label class="opt"><input type="radio" name="q6" value="2" required>当てはまる</label>
      <label class="opt"><input type="radio" name="q6" value="1">どちらともいえない</label>
      <label class="opt"><input type="radio" name="q6" value="0">当てはまらない</label>
      <div class="muted">（安全を確かめ、責任を果たそうとする傾向）</div>
    </div>

    <div class="card">
      <div class="q-title">Q7. 新しい体験やアイデアにワクワクし、前向きに動く。</div>
      <label class="opt"><input type="radio" name="q7" value="2" required>当てはまる</label>
      <label class="opt"><input type="radio" name="q7" value="1">どちらともいえない</label>
      <label class="opt"><input type="radio" name="q7" value="0">当てはまらない</label>
      <div class="muted">（楽しさを探し、可能性を広げたい傾向）</div>
    </div>

    <div class="card">
      <div class="q-title">Q8. 率直でエネルギッシュ。物事を前に進めるリーダー気質だ。</div>
      <label class="opt"><input type="radio" name="q8" value="2" required>当てはまる</label>
      <label class="opt"><input type="radio" name="q8" value="1">どちらともいえない</label>
      <label class="opt"><input type="radio" name="q8" value="0">当てはまらない</label>
      <div class="muted">（強さを持ち、自ら状況を動かしたい傾向）</div>
    </div>

    <div class="card">
      <div class="q-title">Q9. 調和を大切にし、対立を避けて穏やかに物事を進めたい。</div>
      <label class="opt"><input type="radio" name="q9" value="2" required>当てはまる</label>
      <label class="opt"><input type="radio" name="q9" value="1">どちらともいえない</label>
      <label class="opt"><input type="radio" name="q9" value="0">当てはまらない</label>
      <div class="muted">（平和を保ち、周囲に合わせるのが得意な傾向）</div>
    </div>
  </form>

  <div class="actions">
    <button type="button" id="run">診断結果を見る</button>
    <button type="button" class="secondary" id="reset">リセット</button>
  </div>

  <div id="result" style="display:none;"></div>

  <div class="footer-note muted" style="text-align:center; margin-top:40px;">
    <p>© Rainy Muse - IT Course Template</p>
  </div>
</main>

<script>
const typeNames = {
  1:"タイプ1（改革する人）", 2:"タイプ2（助ける人）", 3:"タイプ3（達成する人）",
  4:"タイプ4（個性的な人）", 5:"タイプ5（観察する人）", 6:"タイプ6（忠実な人）",
  7:"タイプ7（熱中する人）", 8:"タイプ8（挑戦する人）", 9:"タイプ9（平和を好む人）"
};

function diagnose(){
  const scores = {};
  const unanswered = [];
  
  for(let i=1; i<=9; i++){
    const sel = document.querySelector(`input[name=q${i}]:checked`);
    if(!sel){
      unanswered.push(i);
    } else {
      scores[i] = Number(sel.value);
    }
  }

  if(unanswered.length > 0){
    alert(`未回答の設問があります: Q${unanswered.join(", ")}`);
    return;
  }

  // ソート
  const sorted = Object.entries(scores).sort((a,b) => b[1] - a[1]);
  const topScore = sorted[0][1];
  const candidates = sorted.filter(([k, v]) => v === topScore);

  const resDiv = document.getElementById('result');
  resDiv.style.display = "block";
  
  let candidateHtml = candidates.map(([k]) => `<span class="candidate-badge">${typeNames[k]}</span>`).join("");
  
  let listHtml = sorted.map(([k, v]) => {
    const isTop = (v === topScore && v > 0);
    return `<span class="score-tag ${isTop ? 'top-score' : ''}">${typeNames[k].split('（')[0]}：${v}点</span>`;
  }).join("");

  resDiv.innerHTML = `
    <div class="result-area">
      <h2 style="margin:0 0 16px; font-size:18px; text-align:center;">あなたのタイプ候補</h2>
      ${candidateHtml}
      <p class="muted" style="text-align:center;">※同点の場合は、どちらの傾向も持っている可能性があります。</p>
      
      <details>
        <summary>すべてのスコアを表示</summary>
        <div style="margin-top:12px; display:flex; flex-wrap:wrap; justify-content:center;">
          ${listHtml}
        </div>
      </details>
      
      <div style="margin-top:20px; padding:12px; background:#f8fafc; border-radius:8px; font-size:13px;">
        <strong>次のステップ：</strong><br>
        この結果はあくまで入り口です。各タイプの特徴を詳しく調べたり、ワークショップを通じて「心の動機」を確認することで、より正確なタイプが見つかります。
      </div>
    </div>
  `;

  // 結果へスクロール
  setTimeout(() => {
    resDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }, 100);
}

document.getElementById('run').addEventListener('click', diagnose);
document.getElementById('reset').addEventListener('click', () => {
  if(confirm('回答をリセットしますか？')){
    document.getElementById('quiz').reset();
    const res = document.getElementById('result');
    res.style.display = 'none';
    window.scrollTo({top: 0, behavior: 'smooth'});
  }
});
</script>
</body>
</html>
